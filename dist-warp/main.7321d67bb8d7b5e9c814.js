(()=>{"use strict";var e,i={215:(e,i,t)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.LightSpeedComponent=void 0;const o=t(904);class s extends o.Component{constructor(e,i){super(e,i),this.updateBeforeRender=()=>{this.crateRainDrops(),BABYLON.MeshBuilder.CreateLineSystem(null,{lines:this.drops,instance:this.rain},this.object.getScene()).rotation.z=Math.PI},this.dropCount=1e3,this.maxDropSize=48,this.area=150,this.altitude=1e3,this.minSpeed=6,this.maxSpeed=15,this.drops=[],this.speeds=[],this.colors=[],this.max=.5*this.area,this.setup()}setup(){const e=new BABYLON.Color4(.99,.99,.99),i=new BABYLON.Color4(.03,.18,.85,.7);for(let t=0;t<this.dropCount;t++){const t=Math.random()*this.area-this.max,o=this.max-(this.max-this.altitude)*Math.random(),s=o-this.maxDropSize*Math.random(),a=Math.random()*this.area-this.max,r=new BABYLON.Vector3(t,o,a),n=new BABYLON.Vector3(t,s,a);this.drops.push([r,n]),this.colors.push([e,i]),this.speeds.push(this.minSpeed+(this.maxSpeed-this.minSpeed)*Math.random())}this.rain=BABYLON.MeshBuilder.CreateLineSystem("rain",{lines:this.drops,updatable:!0,useVertexAlpha:!0,colors:this.colors},this.object.getScene()),this.rain.alwaysSelectAsActiveMesh=!0}crateRainDrops(){let e;for(var i=0;i<this.dropCount;i++)if(e=this.drops[i],e[0].y-=this.speeds[i],e[1].y-=this.speeds[i],e[1].y<-this.max){const i=this.max-(this.max-this.altitude)*Math.random(),t=i-this.maxDropSize*Math.random();e[1].y=t,e[0].y=i}}updateAfterRender(){}}i.LightSpeedComponent=s},357:(e,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Config=void 0,i.Config={paths:{models:"https://lightyear-game.vercel.app/assets/models/",missiles:"https://lightyear-game.vercel.app/assets/models/missles/",localModels:"assets/models/",textures:"assets/textures/",guiLayouts:"assets/guiLayouts/",audio:{effects:"assets/sounds/effects/"}},healthBarScale:15,rangeOfFluctuationMultipler:10,attackDelayTime:100,lightIntensity:3,responsivity:{mobile:500,tablet:1400},droneInfo:{xSpacing:7,scaling:1,shootingAnimationSpeed:.08},laserInfo:{scaling:30,animationSpeed:.2},staticLayout:{active:!0,xSpacing:20,zSpacing:10,initialZ:70},staticCameraAnimation:{active:!0,zDistance:100,yDistance:50,speed:5}}},890:(e,i)=>{var t;Object.defineProperty(i,"__esModule",{value:!0}),i.MissileName=void 0,(t=i.MissileName||(i.MissileName={})).MISSILE01="SM_Prop_Missile_01.glb",t.MISSILE03="SM_Prop_Missile_03.glb",t.MISSILE04="SM_Prop_Missile_04.glb",t.MISSILE07="SM_Prop_Missile_07.glb",t.DRONE="SM_Veh_Drone_01.glb",t.MISSILE_TEXTURE="PolygonSciFiSpace_Texture_01_A.png"},258:(e,i)=>{var t;Object.defineProperty(i,"__esModule",{value:!0}),i.SpaceShipName=void 0,(t=i.SpaceShipName||(i.SpaceShipName={})).ASTEROID_MINER="asteroid-miner",t.BATTLE_CRUISER="battle_cruiser",t.BATTLESHIP="battleship",t.COLONY_SHIP="colony_ship",t.CRAWLER="crawler",t.CRUISER="cruiser",t.DEMOLISHER="demolisher",t.DESTROYER="destroyer",t.FALCON="falcon",t.GALLEON="galleon",t.HEAVY_CARGO="heavy-cargo",t.HEAVY_CRAFT="heavy-craft",t.HEAVY_FIGHTER="heavy-fighter",t.LIGHT_CARGO="light-cargo",t.LIGHT_CRAFT="light-craft",t.LIGHT_FIGHTER="light-fighter",t.PLANET_BOMBER="planet-bomber",t.REAPER="reaper",t.RECYCLER="recycler",t.SPACE_STATION="space-station"},710:(e,i,t)=>{Object.defineProperty(i,"__esModule",{value:!0});const o=t(890),s=t(258),a=new Map([[s.SpaceShipName.ASTEROID_MINER,{name:s.SpaceShipName.ASTEROID_MINER,path:"asteroid-miner/",fileName:"Asteroid_Miner.glb",textureName:"Asteroid_Miner_BaseColor.jpg",laserPosition:BABYLON.Vector3.Zero(),missilePosition:BABYLON.Vector3.Zero(),dronesPosition:new BABYLON.Vector3(0,20,0),jetFirePosition:new BABYLON.Vector3(-.015,.02,-.04),jetFirePosition2:new BABYLON.Vector3(.015,.02,-.04),jetFirePosition3:null,missileName:o.MissileName.MISSILE01,scale:200}],[s.SpaceShipName.BATTLE_CRUISER,{name:s.SpaceShipName.BATTLE_CRUISER,path:"battle-cruiser/",fileName:"Battle_Cruiser.glb",textureName:"Battle_Cruiser_BaseColor.jpg",laserPosition:BABYLON.Vector3.Zero(),missilePosition:BABYLON.Vector3.Zero(),dronesPosition:new BABYLON.Vector3(0,20,0),jetFirePosition:new BABYLON.Vector3(0,0,-.04),jetFirePosition2:null,jetFirePosition3:null,missileName:o.MissileName.MISSILE01,scale:200}],[s.SpaceShipName.BATTLESHIP,{name:s.SpaceShipName.BATTLESHIP,path:"battleship/",fileName:"Battleship.glb",textureName:"Battleship_BaseColor.jpg",laserPosition:BABYLON.Vector3.Zero(),missilePosition:BABYLON.Vector3.Zero(),dronesPosition:new BABYLON.Vector3(0,20,0),jetFirePosition:new BABYLON.Vector3(0,.02,-.09),jetFirePosition2:null,jetFirePosition3:null,missileName:o.MissileName.MISSILE01,scale:200}],[s.SpaceShipName.COLONY_SHIP,{name:s.SpaceShipName.COLONY_SHIP,path:"colony-ship/",fileName:"Colony_Ship.glb",textureName:"Colony_Ship_BaseColor.jpg",laserPosition:BABYLON.Vector3.Zero(),missilePosition:BABYLON.Vector3.Zero(),dronesPosition:new BABYLON.Vector3(0,20,0),jetFirePosition:new BABYLON.Vector3(0,0,-.04),jetFirePosition2:null,jetFirePosition3:null,missileName:o.MissileName.MISSILE01,scale:200}],[s.SpaceShipName.CRAWLER,{name:s.SpaceShipName.CRAWLER,path:"crawler/",fileName:"Crawler.glb",textureName:"Crawler_BaseColor.jpg",laserPosition:BABYLON.Vector3.Zero(),missilePosition:BABYLON.Vector3.Zero(),dronesPosition:new BABYLON.Vector3(0,20,0),jetFirePosition:new BABYLON.Vector3(0,0,-.01),jetFirePosition2:null,jetFirePosition3:null,missileName:o.MissileName.MISSILE01,scale:200}],[s.SpaceShipName.DEMOLISHER,{name:s.SpaceShipName.DEMOLISHER,path:"demolisher/",fileName:"Demolisher.glb",textureName:"Demolisher_BaseColor.jpg",laserPosition:BABYLON.Vector3.Zero(),missilePosition:BABYLON.Vector3.Zero(),dronesPosition:new BABYLON.Vector3(0,20,0),jetFirePosition:new BABYLON.Vector3(0,.035,-.04),jetFirePosition2:null,jetFirePosition3:null,missileName:o.MissileName.MISSILE03,scale:200}],[s.SpaceShipName.DESTROYER,{name:s.SpaceShipName.DESTROYER,path:"destroyer/",fileName:"Destroyer.glb",textureName:"Destroyer_BaseColor.jpg",laserPosition:BABYLON.Vector3.Zero(),missilePosition:BABYLON.Vector3.Zero(),dronesPosition:new BABYLON.Vector3(0,20,0),jetFirePosition:new BABYLON.Vector3(0,0,-.04),jetFirePosition2:null,jetFirePosition3:null,missileName:o.MissileName.MISSILE07,scale:200}],[s.SpaceShipName.FALCON,{name:s.SpaceShipName.FALCON,path:"falcon/",fileName:"Falcon.glb",textureName:"Falcon_BaseColor.jpg",laserPosition:BABYLON.Vector3.Zero(),missilePosition:BABYLON.Vector3.Zero(),dronesPosition:new BABYLON.Vector3(0,20,0),jetFirePosition:new BABYLON.Vector3(0,0,-.04),jetFirePosition2:null,jetFirePosition3:null,missileName:o.MissileName.MISSILE01,scale:200}],[s.SpaceShipName.GALLEON,{name:s.SpaceShipName.GALLEON,path:"galleon/",fileName:"Galleon.glb",textureName:"Galleon_BaseColor.jpg",laserPosition:BABYLON.Vector3.Zero(),missilePosition:BABYLON.Vector3.Zero(),dronesPosition:new BABYLON.Vector3(0,20,0),jetFirePosition:new BABYLON.Vector3(0,0,-.04),jetFirePosition2:null,jetFirePosition3:null,missileName:o.MissileName.MISSILE01,scale:200}],[s.SpaceShipName.HEAVY_CARGO,{name:s.SpaceShipName.HEAVY_CARGO,path:"heavy-cargo/",fileName:"Heavy_Cargo.glb",textureName:"Heavy_Cargo_BaseColor.jpg",laserPosition:BABYLON.Vector3.Zero(),missilePosition:BABYLON.Vector3.Zero(),dronesPosition:new BABYLON.Vector3(0,20,0),jetFirePosition:new BABYLON.Vector3(0,0,-.04),jetFirePosition2:null,jetFirePosition3:null,missileName:o.MissileName.MISSILE01,scale:200}],[s.SpaceShipName.HEAVY_CRAFT,{name:s.SpaceShipName.HEAVY_CRAFT,path:"heavy-craft/",fileName:"Heavy_Craft.glb",textureName:"Heavy_Craft_BaseColor.jpg",laserPosition:BABYLON.Vector3.Zero(),missilePosition:BABYLON.Vector3.Zero(),dronesPosition:new BABYLON.Vector3(0,20,0),jetFirePosition:new BABYLON.Vector3(0,0,-.04),jetFirePosition2:null,jetFirePosition3:null,missileName:o.MissileName.MISSILE01,scale:200}],[s.SpaceShipName.HEAVY_FIGHTER,{name:s.SpaceShipName.HEAVY_FIGHTER,path:"heavy-fighter/",fileName:"Heavy_Fighter.glb",textureName:"Heavy_Fighter_BaseColor.jpg",laserPosition:BABYLON.Vector3.Zero(),missilePosition:BABYLON.Vector3.Zero(),dronesPosition:new BABYLON.Vector3(0,20,0),jetFirePosition:new BABYLON.Vector3(0,.005,-.04),jetFirePosition2:null,jetFirePosition3:null,missileName:o.MissileName.MISSILE07,scale:200}],[s.SpaceShipName.LIGHT_CARGO,{name:s.SpaceShipName.LIGHT_CARGO,path:"light-cargo/",fileName:"Light_Cargo.glb",textureName:"Light_Cargo_BaseColor.jpg",laserPosition:BABYLON.Vector3.Zero(),missilePosition:BABYLON.Vector3.Zero(),dronesPosition:new BABYLON.Vector3(0,20,0),jetFirePosition:new BABYLON.Vector3(0,0,-.04),jetFirePosition2:null,jetFirePosition3:null,missileName:o.MissileName.MISSILE01,scale:200}],[s.SpaceShipName.LIGHT_CRAFT,{name:s.SpaceShipName.LIGHT_CRAFT,path:"light-craft/",fileName:"Light_Craft.glb",textureName:"Light_Craft_BaseColor.jpg",laserPosition:BABYLON.Vector3.Zero(),missilePosition:BABYLON.Vector3.Zero(),dronesPosition:new BABYLON.Vector3(0,20,0),jetFirePosition:new BABYLON.Vector3(0,0,-.04),jetFirePosition2:null,jetFirePosition3:null,missileName:o.MissileName.MISSILE01,scale:200}],[s.SpaceShipName.LIGHT_FIGHTER,{name:s.SpaceShipName.LIGHT_FIGHTER,path:"light-fighter/",fileName:"Light_Fighter.glb",textureName:"Light_Fighter_BaseColor.jpg",laserPosition:BABYLON.Vector3.Zero(),missilePosition:BABYLON.Vector3.Zero(),dronesPosition:new BABYLON.Vector3(0,20,0),jetFirePosition:new BABYLON.Vector3(0,0,-.04),jetFirePosition2:null,jetFirePosition3:null,missileName:o.MissileName.MISSILE01,scale:200}],[s.SpaceShipName.PLANET_BOMBER,{name:s.SpaceShipName.PLANET_BOMBER,path:"planet-bomber/",fileName:"Planet_Bomber.glb",textureName:"Planet_Bomber_BaseColor.jpg",laserPosition:BABYLON.Vector3.Zero(),missilePosition:BABYLON.Vector3.Zero(),dronesPosition:new BABYLON.Vector3(0,20,0),jetFirePosition:new BABYLON.Vector3(-.015,.01,-.05),jetFirePosition2:new BABYLON.Vector3(.015,.01,-.05),jetFirePosition3:null,missileName:o.MissileName.MISSILE03,scale:200}],[s.SpaceShipName.REAPER,{name:s.SpaceShipName.REAPER,path:"reaper/",fileName:"Reaper.glb",textureName:"Reaper_BaseColor.jpg",laserPosition:BABYLON.Vector3.Zero(),missilePosition:BABYLON.Vector3.Zero(),dronesPosition:new BABYLON.Vector3(0,20,0),jetFirePosition:new BABYLON.Vector3(0,0,-.04),jetFirePosition2:null,jetFirePosition3:null,missileName:o.MissileName.MISSILE04,scale:200}],[s.SpaceShipName.RECYCLER,{name:s.SpaceShipName.RECYCLER,path:"recycler/",fileName:"Recycler.glb",textureName:"Recycler_BaseColor.jpg",laserPosition:BABYLON.Vector3.Zero(),missilePosition:BABYLON.Vector3.Zero(),dronesPosition:new BABYLON.Vector3(0,20,0),jetFirePosition:new BABYLON.Vector3(0,0,-.04),jetFirePosition2:null,jetFirePosition3:null,missileName:o.MissileName.MISSILE01,scale:200}],[s.SpaceShipName.SPACE_STATION,{name:s.SpaceShipName.SPACE_STATION,path:"space-station/",fileName:"Spacestation.glb",textureName:"Spacestation_BaseColor_1k.jpg",laserPosition:BABYLON.Vector3.Zero(),missilePosition:BABYLON.Vector3.Zero(),dronesPosition:new BABYLON.Vector3(0,20,0),jetFirePosition:new BABYLON.Vector3(0,0,-.04),jetFirePosition2:null,jetFirePosition3:null,missileName:o.MissileName.MISSILE01,scale:60}]]);i.default=a},737:function(e,i,t){var o=this&&this.__awaiter||function(e,i,t,o){return new(t||(t=Promise))((function(s,a){function r(e){try{l(o.next(e))}catch(e){a(e)}}function n(e){try{l(o.throw(e))}catch(e){a(e)}}function l(e){var i;e.done?s(e.value):(i=e.value,i instanceof t?i:new t((function(e){e(i)}))).then(r,n)}l((o=o.apply(e,i||[])).next())}))};Object.defineProperty(i,"__esModule",{value:!0}),i.MainWarpState=void 0;const s=t(904),a=t(357),r=t(710),n=t(215);i.MainWarpState=class{constructor(e){this.setCallbacks=(e,i)=>{},this.refreshData=e=>o(this,void 0,void 0,(function*(){this.world.reset(),yield this.setEnvironmentData(e)})),this.setEnvironmentData=e=>o(this,void 0,void 0,(function*(){let i=0;for(let t of e)i>3||(yield this.addSpaceship(t),i++);this.onReady()})),this.view=e,this.started=!1}getWorld(){return this.world}isStarted(){return this.started}setup(e){return o(this,void 0,void 0,(function*(){yield this.setWorld(null),this.onReady=e,this.world.start(),this.started=!0}))}setWorld(e){return o(this,void 0,void 0,(function*(){this.view.blur(),Math.max(document.documentElement.clientWidth,window.innerWidth||0),this.world=new s.World(this.view,s.EngineType.STANDARD,e),yield this.world.init(!0,!0),this.world.getScene().clearColor=new BABYLON.Color3(0,0,0);const i=yield this.world.registerComponent(s.ArcRotateCameraController);i.position=new BABYLON.Vector3(0,125,0),i.getCamera().upperBetaLimit=i.getCamera().beta,i.getCamera().lowerBetaLimit=i.getCamera().beta,i.getCamera().lowerRadiusLimit=i.getCamera().radius,i.getCamera().upperRadiusLimit=i.getCamera().radius,i.getCamera().lockedTarget=BABYLON.Vector3.Zero(),(yield this.world.registerComponent(s.HemisphericLightComponent)).intensity=a.Config.lightIntensity,yield this.world.registerComponent(n.LightSpeedComponent)}))}addSpaceship(e,i=null){return o(this,void 0,void 0,(function*(){const i=new s.GameObject(e.shipId,this.world),t=yield i.registerComponent(s.MeshComponent);yield t.loadAsync(a.Config.paths.models+r.default.get(e.shipType).path,r.default.get(e.shipType).fileName),t.get().material.subMaterials[0].albedoTexture=new BABYLON.Texture(a.Config.paths.models+r.default.get(e.shipType).path+r.default.get(e.shipType).textureName,this.world.getScene(),!1,!1),t.position=new BABYLON.Vector3(e.x,e.y,e.z),t.get().scaling=new BABYLON.Vector3(r.default.get(e.shipType).scale,r.default.get(e.shipType).scale,r.default.get(e.shipType).scale),t.get().material.depthFunction=BABYLON.Engine.ALWAYS,t.get().lookAt(new BABYLON.Vector3(0,-150,0)),yield this.addShipJetFire(i,r.default.get(e.shipType).jetFirePosition),r.default.get(e.shipType).jetFirePosition2&&(yield this.addShipJetFire(i,r.default.get(e.shipType).jetFirePosition2)),r.default.get(e.shipType).jetFirePosition3&&(yield this.addShipJetFire(i,r.default.get(e.shipType).jetFirePosition3))}))}addShipJetFire(e,i){return o(this,void 0,void 0,(function*(){const t=yield e.registerComponent(s.ParticlesComponent);t.particlesCapacity=80,t.particleTexture=new BABYLON.Texture(a.Config.paths.textures+"particles/blue_flame.jpg",this.getWorld().getScene()),t.minSize=.01,t.maxSize=3,t.minEmitPower=.05,t.maxEmitPower=.15,t.direction1=new BABYLON.Vector3(0,-.2,-1.5),t.direction2=new BABYLON.Vector3(0,-.2,-1.5),t.minEmitBox=i,t.maxEmitBox=i}))}}},783:(e,i,t)=>{Object.defineProperty(i,"__esModule",{value:!0});const o=t(258),s=[{shipId:"1",shipType:o.SpaceShipName.ASTEROID_MINER,x:50,y:15,z:30,isMySide:!0,initialHP:100,frequencyOfFluctuaction:2,radiusOfFluctuation:.5},{shipId:"2",shipType:o.SpaceShipName.BATTLESHIP,x:20,y:10,z:10,isMySide:!0,initialHP:100,frequencyOfFluctuaction:1,radiusOfFluctuation:.7},{shipId:"3",shipType:o.SpaceShipName.CRAWLER,x:-35,y:15,z:20,isMySide:!0,initialHP:100,frequencyOfFluctuaction:1,radiusOfFluctuation:.2},{shipId:"4",shipType:o.SpaceShipName.HEAVY_CARGO,x:-10,y:20,z:20,isMySide:!0,initialHP:100,frequencyOfFluctuaction:1,radiusOfFluctuation:.2}];i.default=s},489:function(e,i,t){var o=this&&this.__awaiter||function(e,i,t,o){return new(t||(t=Promise))((function(s,a){function r(e){try{l(o.next(e))}catch(e){a(e)}}function n(e){try{l(o.throw(e))}catch(e){a(e)}}function l(e){var i;e.done?s(e.value):(i=e.value,i instanceof t?i:new t((function(e){e(i)}))).then(r,n)}l((o=o.apply(e,i||[])).next())}))};Object.defineProperty(i,"__esModule",{value:!0});const s=t(737),a=t(783),r=document.getElementById("view");let n=new s.MainWarpState(r);function l(){document.getElementById("loader").style.display="none",document.getElementById("view").style.display="block",n.getWorld().getEngine().resize()}window.onmessage=function(e){console.log(e)},window.refreshData=function(e){n.refreshData(e)},function(){o(this,void 0,void 0,(function*(){yield n.setup(l),yield n.setEnvironmentData(a.default)}))}()}},t={};function o(e){var s=t[e];if(void 0!==s)return s.exports;var a=t[e]={exports:{}};return i[e].call(a.exports,a,a.exports,o),a.exports}o.m=i,e=[],o.O=(i,t,s,a)=>{if(!t){var r=1/0;for(p=0;p<e.length;p++){for(var[t,s,a]=e[p],n=!0,l=0;l<t.length;l++)(!1&a||r>=a)&&Object.keys(o.O).every((e=>o.O[e](t[l])))?t.splice(l--,1):(n=!1,a<r&&(r=a));if(n){e.splice(p--,1);var c=s();void 0!==c&&(i=c)}}return i}a=a||0;for(var p=e.length;p>0&&e[p-1][2]>a;p--)e[p]=e[p-1];e[p]=[t,s,a]},o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),o.o=(e,i)=>Object.prototype.hasOwnProperty.call(e,i),(()=>{var e={179:0};o.O.j=i=>0===e[i];var i=(i,t)=>{var s,a,[r,n,l]=t,c=0;if(r.some((i=>0!==e[i]))){for(s in n)o.o(n,s)&&(o.m[s]=n[s]);if(l)var p=l(o)}for(i&&i(t);c<r.length;c++)a=r[c],o.o(e,a)&&e[a]&&e[a][0](),e[r[c]]=0;return o.O(p)},t=self.webpackChunklightyear_battle_scene=self.webpackChunklightyear_battle_scene||[];t.forEach(i.bind(null,0)),t.push=i.bind(null,t.push.bind(t))})();var s=o.O(void 0,[904],(()=>o(489)));s=o.O(s)})();